---
outline: deep
---

# è·¯ç”±é—®é¢˜

## return é—®é¢˜

åœ¨ Vue.js çš„è·¯ç”±å®ˆå« `router.beforeEach` ä¸­ï¼Œå¦‚æœä½ åœ¨å…¶ä¸­æ·»åŠ äº†åŠ¨æ€è·¯ç”±ï¼Œä½ éœ€è¦å†æ¬¡ `return to.path`ï¼ˆğŸ»å¤„ï¼‰ã€‚
å› ä¸ºè·¯ç”±å®ˆå«çš„å·¥ä½œæ–¹å¼ï¼Œ`router.beforeEach` æ˜¯ä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«ï¼Œå®ƒåœ¨è·¯ç”±æ”¹å˜ä¹‹å‰è¢«è°ƒç”¨ã€‚
å½“ä½ åœ¨ `router.beforeEach` ä¸­æ·»åŠ åŠ¨æ€è·¯ç”±åï¼Œè¿™ä¸ªè·¯ç”±çš„æ·»åŠ å¹¶ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œå› ä¸ºå½“å‰çš„å¯¼èˆªå·²ç»å¼€å§‹äº†ã€‚
ä½ éœ€è¦é€šè¿‡ `return to.path` æ¥é‡æ–°å¯¼èˆªï¼Œä»¥ä¾¿æ–°æ·»åŠ çš„è·¯ç”±èƒ½å¤Ÿç”Ÿæ•ˆã€‚
```typescript
router.beforeEach(async (to) => {
    if (getItemWithExpiration()) {
        if (to.path === '/login') {
            return '/'
        } else {
            if (useUserStore().userInfo.roles.length === 0) {
                //çœç•¥
                //ğŸ»
                return to.path // [!code hl]
            } else {
                return true
            }
        }
    }
    //çœç•¥
})
```

## è·¯ç”±pathåŒ¹é…é—®é¢˜

åœ¨ Vue.js çš„è·¯ç”±é…ç½®ä¸­ï¼Œ`path: '/:path(.*)'` æ˜¯ä¸€ä¸ªé€šé…ç¬¦è·¯ç”±ã€‚è¿™ä¸ªè·¯ç”±ä¼šåŒ¹é…æ‰€æœ‰è·¯å¾„ï¼Œè¿™åœ¨ä½ æƒ³è¦å¤„ç† 404 é¡µé¢æˆ–è€…æœªå®šä¹‰çš„è·¯ç”±æ—¶éå¸¸æœ‰ç”¨ã€‚
è¿™ä¸ªè·¯ç”±çš„å·¥ä½œåŸç†æ˜¯è¿™æ ·çš„ï¼š

- `:` è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåŠ¨æ€è·¯å¾„å‚æ•°ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç»„ä»¶ä¸­é€šè¿‡ `useRoute().path` è®¿é—®è¿™ä¸ªå‚æ•°å€¼ã€‚
- `path` æ˜¯å‚æ•°çš„åå­—ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦æ›´æ”¹å®ƒã€‚
- `(.*)` æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºåŒ¹é…ä»»ä½•å­—ç¬¦ã€‚
  æ‰€ä»¥ï¼Œå¦‚æœä½ çš„åº”ç”¨æ”¶åˆ°äº†ä¸€ä¸ªæœªå®šä¹‰çš„è·¯ç”±ï¼Œä¾‹å¦‚ `/undefined-route`ï¼Œé‚£ä¹ˆè¿™ä¸ªè·¯ç”±ä¼šè¢« `/:path(.*)`
  åŒ¹é…ï¼Œå¹¶ä¸”ä½ å¯ä»¥åœ¨ä½ çš„ç»„ä»¶ä¸­é€šè¿‡ `useRoute().path` è®¿é—®åˆ° `'undefined-route'`ã€‚
  è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```typescript
const router = createRouter({
    routes: [
        {
            path: '/:path(.*)',
            component: NotFoundComponent
        },
    ]
})
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä»»ä½•æœªå®šä¹‰çš„è·¯ç”±éƒ½ä¼šæ¸²æŸ“ `NotFoundComponent` ç»„ä»¶ã€‚
